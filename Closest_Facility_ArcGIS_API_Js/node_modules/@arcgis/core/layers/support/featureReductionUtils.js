/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import e from"../../core/Error.js";import{setDeepValue as t}from"../../core/object.js";import o from"./FeatureReduction.js";import r from"./FeatureReductionCluster.js";import n from"./FeatureReductionSelection.js";const s={key:"type",base:o,typeMap:{selection:n}};function u(e,t){const o=(t=t.layerDefinition||t).featureReduction;if(o)switch(o.type){case"selection":return n.fromJSON(o);case"cluster":return r.fromJSON(o)}return null}function i(e,o,r,n){const s=c(e,{},n);s&&t(r,s,o)}function c(t,o,r){return t?"selection"!==t.type?(r.messages&&r.messages.push(new e("featureReduction:unsupported",`FeatureReduction of type '${t.declaredClass}' are not supported in scenes.`,{featureReduction:t,context:r})),null):t.write(o,r):null}const a={types:{key:"type",base:o,typeMap:{selection:n,cluster:r}},json:{write:{target:"layerDefinition.featureReduction",allowNull:!0}}};export{a as featureReductionProperty,u as read,s as webSceneFeatureReductionTypes,c as write,i as writeTarget};
