/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import"../../../../webgl/BufferObject.js";import"../../../../webgl/FramebufferObject.js";import{Program as e}from"../../../../webgl/Program.js";import"../../../../webgl/enums.js";import"../../../../webgl/checkWebGLError.js";import"../../../../webgl/renderState.js";import"../../../../webgl/Texture.js";import"../../../../webgl/VertexArrayObject.js";import{text as r,outline as t,line as a,icon as s,fill as n,circle as o,background as i}from"./Programs.js";class c{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(r,t,a){const s=t.key<<3|this._getMaterialOptionsValue(t.type,a);if(this._programByKey.has(s))return this._programByKey.get(s);const n=this._getProgramTemplate(t.type),{shaders:o}=n,{vertexShader:i,fragmentShader:c}=o(a),p=t.getShaderHeader(),g=t.getShaderMain(),m=i.replace("#pragma header",p).replace("#pragma main",g),u=new e(r,m,c,t.getAttributeLocations());return this._programByKey.set(s,u),u}_getMaterialOptionsValue(e,r){switch(e){case 0:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 1:{const e=r;return(e.pattern?1:0)<<1|(e.id?1:0)}case 2:return r.id?1:0;case 3:{const e=r;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1|(e.id?1:0)}case 4:{const e=r;return(e.sdf?1:0)<<1|(e.id?1:0)}case 5:return r.id?1:0;case 6:return r.id?1:0;default:return 0}}_getProgramTemplate(e){switch(e){case 0:return i;case 5:return o;case 1:return n;case 4:return s;case 3:return a;case 2:return t;case 6:return r;default:return null}}}export{c as default};
