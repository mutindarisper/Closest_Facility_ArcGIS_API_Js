/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import{_ as r}from"../../../chunks/tslib.es6.js";import{destroyMaybe as e,applySome as t,unwrapOr as s,mapOr as i}from"../../../core/maybe.js";import{property as a}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/Logger.js";import{subclass as o}from"../../../core/accessorSupport/decorators/subclass.js";import{LayerView3D as l}from"./LayerView3D.js";import{LineOfSightController as n}from"./analysis/LineOfSight/LineOfSightController.js";import{LineOfSightLayerViewData as y}from"./analysis/LineOfSight/LineOfSightLayerViewData.js";import{LineOfSightView as p}from"./analysis/LineOfSight/LineOfSightView.js";import h from"../../layers/LayerView.js";let u=class extends(l(h)){constructor(){super(...arguments),this.type="line-of-sight-3d",this.layerViewData=new y}initialize(){const r=this.view,e=this.layer;this._analysisController=new n({layer:e,layerViewData:this.layerViewData,view:r}),this._analysisView=new p({layer:e,layerView:this,view:r}),this.handles.add([this._analysisController.on("result-changed",(r=>{r.target!==this.layerViewData.cursorTarget&&this.emit("result-changed",r)}))])}destroy(){this._analysisController=e(this._analysisController),this._analysisView=e(this._analysisView)}get results(){return this.layerViewData.analyses.map((r=>r.result))}get priority(){return this._analysisController.priority}set priority(r){this._analysisController.priority=r}getResultForTarget(r){const e=this.layerViewData.analyses.find((e=>e.target===r)),i=t(e,(r=>r.result));return s(i,null)}isUpdating(){return i(this._analysisController,!1,(r=>r.updating))}get testData(){return{view:this._analysisView,controller:this._analysisController}}};r([a({readOnly:!0})],u.prototype,"type",void 0),r([a()],u.prototype,"layer",void 0),r([a({readOnly:!0})],u.prototype,"results",null),r([a()],u.prototype,"priority",null),r([a()],u.prototype,"layerViewData",void 0),r([a()],u.prototype,"_analysisController",void 0),r([a()],u.prototype,"_analysisView",void 0),u=r([o("esri.views.3d.layers.LineOfSightLayerView3D")],u);var w=u;export{u as LineOfSightLayerView3D,w as default};
