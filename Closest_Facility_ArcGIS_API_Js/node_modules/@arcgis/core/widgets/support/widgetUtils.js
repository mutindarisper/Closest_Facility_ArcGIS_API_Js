/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
import t from"@esri/arcgis-html-sanitizer";import e from"../../core/ArrayPool.js";import"../../core/has.js";import n from"../../core/Logger.js";var i,r,o=function(t){if("WebkitTransition"in t.style)i="webkitTransitionEnd",r="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");i="transitionend",r="animationend"}},s=function(t){i||o(t)},a=function(t,e){return void 0===e&&(e=t+"-active"),function(n){s(n);var o=!1,a=function(s){o||(o=!0,n.removeEventListener(i,a),n.removeEventListener(r,a),n.classList.remove(t),n.classList.remove(e))};n.classList.add(t),n.addEventListener(i,a),n.addEventListener(r,a),requestAnimationFrame((function(){n.classList.add(e)}))}},c=function(t,e){return void 0===e&&(e=t+"-active"),function(n,o){s(n);var a=!1,c=function(t){a||(a=!0,n.removeEventListener(i,c),n.removeEventListener(r,c),o())};n.classList.add(t),n.addEventListener(i,c),n.addEventListener(r,c),requestAnimationFrame((function(){n.classList.add(e)}))}};function l(t){const n=e.acquire();for(let e=0;e<arguments.length;e++){const t=arguments[e],i=typeof t;if("string"===i)n.push(t);else if(Array.isArray(t))n.push.apply(n,t);else if("object"===i)for(const e in t)t[e]&&n.push(e)}const i=n.join(" ");return e.release(n),i}function d(t){const e=null==t?void 0:t.closest("[dir]");return null!==e&&e instanceof HTMLElement&&"rtl"===e.dir||"rtl"===document.dir}function u(t){return d(t)?"rtl":"ltr"}function p(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function g(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function f(t,e){return("enter"===t?a:c)(e)}n.getLogger("esri.widgets.support.widgetUtils");const m=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup",...["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"]],h=m.reduce(((t,e)=>(t[e]=[],t)),{}),v=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],L=new t({whiteList:h,onTagAttr:(t,e,n)=>{const i=`${e}="${n}"`;if(v.includes(e))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function w(t,e){const n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.top+n.height,o=i.top+i.height,s=n.top,a=i.top;(r>o||s<a)&&t.scrollIntoView({block:"end"})}function y(t){return"Enter"===t||" "===t}function b(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function E(){return b().startsWith("dark")}function k(){return"calcite-theme-"+(E()?"dark":"light")}export{m as additionalAllowedTags,l as classes,f as cssTransition,p as discardNode,k as getCalciteThemeClass,u as getDir,b as getThemeName,y as isActivationKey,E as isDarkTheme,d as isRTL,w as keepMenuItemWithinView,L as renderingSanitizer,v as safeAttrs,g as storeNode};
