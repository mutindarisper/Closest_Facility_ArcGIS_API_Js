"use strict";(self.webpackChunkarcgis_rm=self.webpackChunkarcgis_rm||[]).push([[3549,8163],{53549:(e,n,t)=>{t.r(n),t.d(n,{executeScript:()=>le,extend:()=>ce,extractFieldLiterals:()=>ue,findFunctionCalls:()=>de,functionHelper:()=>ie,referencesFunction:()=>he,referencesMember:()=>fe,validateScript:()=>se});var r=t(58780),o=t(56088),a=t(19249),i=t(94634),c=t(30359),l=t(46001),u=t(8965),s=t(94837),f=t(61125),h=t(68673),d=t(33354),p=t(56101),g=t(88163),w=t(32200),m=t(63038),y=t(47154),E=t(36054),v=t(78668),I=t(91772),N=t(20031),A=t(74304),b=t(53446),R=t(89542),S=t(90819),C=t(14685);const Z=100;function U(e){return e instanceof Error?(0,v.d1)(e):(0,v.d1)(new Error(e))}function T(e){return(0,v.DB)(e)}function F(e,n){const t=[];for(let r=0;r<n.arguments.length;r++)t.push(D(e,n.arguments[r]));return(0,v.$6)(t)}function O(e,n,t){return(0,v.Ue)(((r,o)=>{F(e,n).then((a=>{try{r(t(e,n,a))}catch(e){o(e)}}),o)}))}function x(e,n,t){try{return F(e,n).then((r=>{try{const o=t(e,n,r);return function(e){return e&&"function"==typeof e.then}(o)?o:(0,v.DB)(o)}catch(e){return U(e)}}))}catch(e){return U(e)}}function D(e,n,t){try{if(n.breakpoint&&!0!==t)return n.breakpoint().then((()=>D(e,n,!0)));switch(n.type){case"VariableDeclarator":return function(e,n){try{let t=null;return t=null===n.init?(0,v.DB)(null):D(e,n.init),null!==e.localScope?t.then((t=>(0,v.Ue)((r=>{if(t===s.v&&(t=null),"Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();e.localScope[o]={value:t,valueset:!0,node:n.init},r(s.v)})))):t.then((t=>(0,v.Ue)((r=>{if("Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();t===s.v&&(t=null),e.globalScope[o]={value:t,valueset:!0,node:n.init},r(s.v)}))))}catch(e){return U(e)}}(e,n);case"VariableDeclaration":return j(e,n,0);case"BlockStatement":return function(e,n){try{return _(e,n,0)}catch(e){return U(e)}}(e,n);case"FunctionDeclaration":return function(e,n){try{const t=n.id.name.toLowerCase();return e.globalScope[t]={valueset:!0,node:null,value:new c.Z(n,e)},(0,v.DB)(s.v)}catch(e){return U(e)}}(e,n);case"ReturnStatement":return function(e,n){return(0,v.Ue)(((t,r)=>{null===n.argument?t(new s.R(s.v)):D(e,n.argument).then((e=>{try{t(new s.R(e))}catch(e){r(e)}}),r)}))}(e,n);case"IfStatement":return function(e,n){return(0,v.Ue)(((t,r)=>{"AssignmentExpression"!==n.test.type&&"UpdateExpression"!==n.test.type?D(e,n.test).then((o=>{try{!0===o?D(e,n.consequent).then(t,r):!1===o?null!==n.alternate?D(e,n.alternate).then(t,r):t(s.v):r(new Error((0,f.H5)(n.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(e){r(e)}}),r):r(new Error((0,f.H5)(n.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ExpressionStatement":return function(e,n){try{return"AssignmentExpression"===n.expression.type?D(e,n.expression):(n.expression.type,D(e,n.expression).then((e=>(0,v.Ue)((n=>{n(e===s.v?s.v:new s.I(e))})))))}catch(e){return(0,v.d1)(e)}}(e,n);case"UpdateExpression":return function(e,n){try{const t=n.argument;if("MemberExpression"===t.type){const r={t:null};return D(e,t.object).then((n=>{let o=null;return r.t=n,!0===t.computed?o=D(e,t.property):"Identifier"===t.property.type&&(o=(0,v.DB)(t.property.name)),o})).then((e=>(0,v.Ue)((t=>{const o=r.t;let c;if((0,s.a)(o)){if(!(0,s.j)(e))throw new Error("Invalid Parameter");if(e<0&&(e=o.length+e),e<0||e>=o.length)throw new Error("Assignment outside of array bounds");c=(0,s.t)(o[e]),o[e]="++"===n.operator?c+1:c-1}else if(o instanceof a.Z){if(!1===(0,s.f)(e))throw new Error("Dictionary accessor must be a string");if(!0!==o.hasField(e))throw new Error("Invalid Parameter");c=(0,s.t)(o.field(e)),o.setField(e,"++"===n.operator?c+1:c-1)}else{if(!(o instanceof i.Z))throw(0,s.b)(o)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,s.f)(e))throw new Error("Feature accessor must be a string");if(!0!==o.hasField(e))throw new Error("Invalid Parameter");c=(0,s.t)(o.field(e)),o.setField(e,"++"===n.operator?c+1:c-1)}!1===n.prefix?t(c):t("++"===n.operator?c+1:c-1)}))))}return(0,v.Ue)(((t,r)=>{const o="Identifier"===n.argument.type?n.argument.name.toLowerCase():"";if(!o)throw new Error("Invalid identifier");let a;return null!==e.localScope&&void 0!==e.localScope[o]?(a=(0,s.t)(e.localScope[o].value),e.localScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void 0!==e.globalScope[o]?(a=(0,s.t)(e.globalScope[o].value),e.globalScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void r(new Error("Variable not recognised"))}))}catch(e){return(0,v.d1)(e)}}(e,n);case"AssignmentExpression":return function(e,n){return(0,v.Ue)(((t,r)=>{const o=n.left;if("MemberExpression"===o.type)D(e,n.right).then((c=>{try{D(e,o.object).then((l=>{try{let u=null;if(!0===o.computed)u=D(e,o.property);else{if("Identifier"!==o.property.type)throw new Error("Expected computed or identifier for assignemnt target");u=(0,v.DB)(o.property.name)}u.then((e=>{try{if((0,s.a)(l)){if(!(0,s.j)(e))throw new Error("Invalid Parameter");if(e<0&&(e=l.length+e),e<0||e>l.length)throw new Error("Assignment outside of array bounds");if(e===l.length){if("="!==n.operator)throw new Error("Invalid Parameter");l[e]=B(c,n.operator,l[e],n)}else l[e]=B(c,n.operator,l[e],n)}else if(l instanceof a.Z){if(!1===(0,s.f)(e))throw new Error("Dictionary accessor must be a string");if(!0===l.hasField(e))l.setField(e,B(c,n.operator,l.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");l.setField(e,B(c,n.operator,null,n))}}else{if(!(l instanceof i.Z))throw(0,s.b)(l)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===(0,s.f)(e))throw new Error("Feature accessor must be a string");if(!0===l.hasField(e))l.setField(e,B(c,n.operator,l.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");l.setField(e,B(c,n.operator,null,n))}}t(s.v)}catch(e){r(e)}}),r)}catch(e){r(e)}}),r)}catch(e){r(e)}}),r);else{const a=o.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[a])return void D(e,n.right).then((o=>{try{e.localScope[a]={value:B(o,n.operator,e.localScope[a].value,n),valueset:!0,node:n.right},t(s.v)}catch(e){r(e)}}),r);void 0!==e.globalScope[a]?D(e,n.right).then((o=>{try{e.globalScope[a]={value:B(o,n.operator,e.globalScope[a].value,n),valueset:!0,node:n.right},t(s.v)}catch(e){r(e)}}),r):r(new Error("Cannot assign undeclared variable"))}}))}(e,n);case"ForStatement":return function(e,n){try{return null!==n.init?D(e,n.init).then((()=>(0,v.Ue)(((t,r)=>{L(e,n,{testResult:!0,lastAction:s.v},(e=>{t(e)}),(e=>{r(e)}),0)})))):(0,v.Ue)(((t,r)=>{L(e,n,{testResult:!0,lastAction:s.v},(e=>{t(e)}),(e=>{r(e)}),0)}))}catch(e){return(0,v.d1)(e)}}(e,n);case"ForInStatement":return function(e,n){return(0,v.Ue)(((t,r)=>{D(e,n.right).then((o=>{try{let c=null;c="VariableDeclaration"===n.left.type?D(e,n.left):(0,v.DB)(),c.then((()=>{try{let c="";if("VariableDeclaration"===n.left.type){const e=n.left.declarations[0].id;"Identifier"===e.type&&(c=e.name)}else"Identifier"===n.left.type&&(c=n.left.name);if(!c)throw new Error((0,f.H5)(n,"RUNTIME","INVALIDVARIABLE"));c=c.toLowerCase();let l=null;if(null!==e.localScope&&void 0!==e.localScope[c]&&(l=e.localScope[c]),null===l&&void 0!==e.globalScope[c]&&(l=e.globalScope[c]),null===l)return void r(new Error((0,f.H5)(n,"RUNTIME","VARIABLENOTDECLARED")));(0,s.a)(o)||(0,s.f)(o)?P(e,n,o,{reject:r,resolve:t},l):(0,s.b)(o)?function(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(s.v);M(e,n,t,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}(e,n,o,{reject:r,resolve:t},l):o instanceof a.Z||o instanceof i.Z?function(e,n,t,r,o){try{P(e,n,t.keys(),r,o,"k")}catch(e){r.reject(e)}}(e,n,o,{reject:r,resolve:t},l):(0,s.o)(o)?z(o.iterator(e.abortSignal),e,n,o,l,(e=>{t(e)}),(e=>{r(e)}),0):P(e,n,[],{reject:r,resolve:t},l)}catch(e){r(e)}}),r)}catch(e){r(e)}}),r)}))}(e,n);case"BreakStatement":return(0,v.DB)(s.k);case"EmptyStatement":return(0,v.DB)(s.v);case"ContinueStatement":return(0,v.DB)(s.m);case"TemplateElement":return function(e,n){return(0,v.DB)(n.value?n.value.cooked:"")}(0,n);case"TemplateLiteral":return function(e,n){return(0,v.Ue)((t=>{const r=[];(0,h.Dt)(n.expressions,((n,t,o,a)=>D(e,t).then((e=>{r[o]=(0,s.d)(e)})))).then((()=>{let e="",o=0;for(const t of n.quasis)e+=t.value?t.value.cooked:"",!1===t.tail&&(e+=r[o]?r[o]:"",o++);t(e)}))}))}(e,n);case"Identifier":return G(e,n);case"MemberExpression":return function(e,n){try{return D(e,n.object).then((t=>{try{return null===t?(0,v.d1)(new Error((0,f.H5)(n,"RUNTIME","NOTFOUND"))):!1===n.computed?"Identifier"===n.property.type?t instanceof a.Z||t instanceof i.Z?(0,v.DB)(t.field(n.property.name)):t instanceof N.Z?(0,v.DB)(Y(t,n.property.name,0,n)):(0,v.d1)(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE"))):(0,v.d1)(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE"))):D(e,n.property).then((e=>(0,v.Ue)(((r,o)=>{if(t instanceof a.Z||t instanceof i.Z)(0,s.f)(e)?r(t.field(e)):o(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE")));else if(t instanceof N.Z)(0,s.f)(e)?r(Y(t,e,0,n)):o(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,s.a)(t))if((0,s.j)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length+e),e>=t.length||e<0)throw new Error((0,f.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t[e])}else o(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,s.b)(t))if((0,s.j)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length()+e),e>=t.length()||e<0)throw new Error((0,f.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t.get(e))}else o(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE")));else if((0,s.f)(t))if((0,s.j)(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=t.length+e),e>=t.length||e<0)throw new Error((0,f.H5)(n,"RUNTIME","OUTOFBOUNDS"));r(t[e])}else o(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE")));else o(new Error((0,f.H5)(n,"RUNTIME","INVALIDTYPE")))}))))}catch(e){return U(e)}}))}catch(e){return U(e)}}(e,n);case"Literal":return T(n.value);case"CallExpression":return function(e,n){try{if("Identifier"!==n.callee.type)return U((0,f.H5)(n,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[n.callee.name.toLowerCase()]){const t=e.localScope[n.callee.name.toLowerCase()];return t.value instanceof s.N?t.value.fn(e,n):t.value instanceof c.Z?ne(e,n,t.value.definition):U((0,f.H5)(n,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[n.callee.name.toLowerCase()]){const t=e.globalScope[n.callee.name.toLowerCase()];return t.value instanceof s.N?t.value.fn(e,n):t.value instanceof c.Z?ne(e,n,t.value.definition):U((0,f.H5)(n,"RUNTIME","NOTAFUNCTION"))}return U((0,f.H5)(n,"RUNTIME","NOTFOUND"))}catch(e){return U(e)}}(e,n);case"UnaryExpression":return function(e,n){try{return D(e,n.argument).then((e=>(0,v.Ue)(((t,r)=>{(0,s.i)(e)&&"!"===n.operator?t(!e):"-"===n.operator?t(-1*(0,s.t)(e)):"+"===n.operator?t(1*(0,s.t)(e)):"~"===n.operator?t(~(0,s.t)(e)):r(new Error((0,f.H5)(n,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))))}catch(e){return U(e)}}(e,n);case"BinaryExpression":return function(e,n){try{return(0,v.$6)([D(e,n.left),D(e,n.right)]).then((e=>(0,v.Ue)(((t,r)=>{const o=e[0],a=e[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":t((0,s.h)((0,s.t)(o),(0,s.t)(a),n.operator));case"==":t((0,s.e)(o,a));break;case"!=":t(!(0,s.e)(o,a));break;case"<":case">":case"<=":case">=":t((0,s.g)(o,a,n.operator));break;case"+":(0,s.f)(o)||(0,s.f)(a)?t((0,s.d)(o)+(0,s.d)(a)):t((0,s.t)(o)+(0,s.t)(a));break;case"-":t((0,s.t)(o)-(0,s.t)(a));break;case"*":t((0,s.t)(o)*(0,s.t)(a));break;case"/":t((0,s.t)(o)/(0,s.t)(a));break;case"%":t((0,s.t)(o)%(0,s.t)(a));break;default:r(new Error((0,f.H5)(n,"RUNTIME","OPERATORNOTRECOGNISED")))}}))))}catch(e){return U(e)}}(e,n);case"LogicalExpression":return function(e,n){return(0,v.Ue)(((t,r)=>{"AssignmentExpression"!==n.left.type&&"UpdateExpression"!==n.left.type?"AssignmentExpression"!==n.right.type&&"UpdateExpression"!==n.right.type?D(e,n.left).then((o=>{try{if(!(0,s.i)(o))throw new Error((0,f.H5)(n,"RUNTIME","ONLYBOOLEAN"));switch(n.operator){case"||":!0===o?t(o):D(e,n.right).then((e=>{try{if(!(0,s.i)(e))throw new Error((0,f.H5)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;case"&&":!1===o?t(o):D(e,n.right).then((e=>{try{if(!(0,s.i)(e))throw new Error((0,f.H5)(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;default:throw new Error((0,f.H5)(n,"RUNTIME","ONLYORORAND"))}}catch(e){r(e)}}),r):r(new Error((0,f.H5)(n.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error((0,f.H5)(n.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ArrayExpression":return function(e,n){try{const t=[];for(let r=0;r<n.elements.length;r++)t.push(D(e,n.elements[r]));return(0,v.$6)(t).then((e=>(0,v.Ue)(((t,r)=>{for(let t=0;t<e.length;t++){if((0,s.c)(e[t]))return void r(new Error((0,f.H5)(n,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[t]===s.v&&(e[t]=null)}t(e)}))))}catch(e){return U(e)}}(e,n);case"ObjectExpression":return function(e,n){try{const t=[];for(let r=0;r<n.properties.length;r++)t.push(D(e,n.properties[r]));return(0,v.$6)(t).then((e=>(0,v.Ue)((n=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];if((0,s.c)(r.value))throw new Error("Illegal Argument");if(!1===(0,s.f)(r.key))throw new Error("Illegal Argument");r.value===s.v?t[r.key.toString()]=null:t[r.key.toString()]=r.value}const r=new a.Z(t);r.immutable=!1,n(r)}))))}catch(e){return U(e)}}(e,n);case"Property":return function(e,n){try{return D(e,n.value).then((t=>(0,v.Ue)((r=>{"Identifier"===n.key.type?r({key:n.key.name,value:t}):D(e,n.key).then((e=>{r({key:e,value:t})}))}))))}catch(e){return(0,v.d1)(e)}}(e,n);default:return U((0,f.H5)(n,"RUNTIME","UNREOGNISED"))}}catch(e){return U(e)}}function H(e,n,t){try{return D(e,n.body).then((r=>{try{return t.lastAction=r,t.lastAction===s.k||t.lastAction instanceof s.R?(t.testResult=!1,(0,v.DB)(t)):null!==n.update?D(e,n.update).then((()=>(0,v.DB)(t))):(0,v.DB)(t)}catch(e){return(0,v.d1)(e)}}))}catch(e){return(0,v.d1)(e)}}function L(e,n,t,r,o,a){try{(function(e,n,t){try{return null!==n.test?D(e,n.test).then((r=>{try{return!0===e.abortSignal.aborted?(0,v.d1)(new Error("Cancelled")):(t.testResult=r,!1===t.testResult?(0,v.DB)(t):!0!==t.testResult?(0,v.d1)(new Error((0,f.H5)(n,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):H(e,n,t))}catch(e){return(0,v.d1)(e)}})):H(e,n,t)}catch(e){return(0,v.d1)(e)}})(e,n,t).then((()=>{try{!0===t.testResult?++a>Z?(a=0,setTimeout((()=>{L(e,n,t,r,o,a)}),0)):L(e,n,t,r,o,a):t.lastAction instanceof s.R?r(t.lastAction):r(s.v)}catch(e){o(e)}}),(e=>{o(e)}))}catch(e){o(e)}}function k(e,n,t,r,o,a,i,c,l,u){try{if(r<=a)return void c(s.v);o.value="k"===i?t[a]:a,D(e,n.body).then((f=>{try{f instanceof s.R?c(f):f===s.k?c(s.v):++u>Z?(u=0,setTimeout((()=>{k(e,n,t,r,o,a+1,i,c,l,u)}),0)):k(e,n,t,r,o,a+1,i,c,l,u)}catch(e){l(e)}}),(e=>{l(e)}))}catch(e){l(e)}}function M(e,n,t,r,o,a,i,c,l){try{if(t.length()<=o)return void i(s.v);r.value="k"===a?t.get(o):o,D(e,n.body).then((u=>{u instanceof s.R?i(u):u===s.k?i(s.v):++l>Z?(l=0,setTimeout((()=>{M(e,n,t,r,o+1,a,i,c,l)}),0)):M(e,n,t,r,o+1,a,i,c,l)}),(e=>{c(e)}))}catch(e){c(e)}}function P(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(s.v);k(e,n,t,t.length,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}function z(e,n,t,r,o,a,c,l){try{e.next().then((u=>{try{if(null===u)a(s.v);else{const f=i.Z.createFromGraphicLikeObject(u.geometry,u.attributes,r);f._underlyingGraphic=u,o.value=f,D(n,t.body).then((i=>{try{i===s.k?a(s.v):i instanceof s.R?a(i):++l>Z?(l=0,setTimeout((()=>{z(e,n,t,r,o,a,c,l)}),0)):z(e,n,t,r,o,a,c,l)}catch(e){c(e)}}),(e=>{c(e)}))}}catch(e){c(e)}}),(e=>{c(e)}))}catch(e){c(e)}}function B(e,n,t,r){switch(n){case"=":return e===s.v?null:e;case"/=":return(0,s.t)(t)/(0,s.t)(e);case"*=":return(0,s.t)(t)*(0,s.t)(e);case"-=":return(0,s.t)(t)-(0,s.t)(e);case"+=":return(0,s.f)(t)||(0,s.f)(e)?(0,s.d)(t)+(0,s.d)(e):(0,s.t)(t)+(0,s.t)(e);case"%=":return(0,s.t)(t)%(0,s.t)(e);default:throw new Error((0,f.H5)(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}function _(e,n,t){try{return t>=n.body.length?(0,v.DB)(s.v):(0,v.Ue)(((r,o)=>{D(e,n.body[t]).then((a=>{try{a instanceof s.R||a===s.k||a===s.m||t===n.body.length-1?r(a):_(e,n,t+1).then(r,o)}catch(e){o(e)}}),o)}))}catch(e){return U(e)}}function j(e,n,t){return(0,v.Ue)(((r,o)=>{t>=n.declarations.length?r(s.v):D(e,n.declarations[t]).then((()=>{t===n.declarations.length-1?r(s.v):j(e,n,t+1).then((()=>{r(s.v)}),o)}),o)}))}let V=0;function Y(e,n,t,r){let o;switch(n=n.toLowerCase()){case"hasz":{const n=e.hasZ;return void 0!==n&&n}case"hasm":{const n=e.hasM;return void 0!==n&&n}case"spatialreference":{let n=e.spatialReference._arcadeCacheId;if(void 0===n){let t=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(t=!1),t&&(V++,e.spatialReference._arcadeCacheId=V,n=V)}const t=new a.Z({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==n&&(t._arcadeCacheId="SPREF"+n.toString()),t}}switch(e.type){case"extent":switch(n){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const t=e[n];return void 0!==t?t:null}case"type":return"Extent"}break;case"polygon":switch(n){case"rings":return o=e.cache._arcadeCacheId,void 0===o&&(V++,o=V,e.cache._arcadeCacheId=o),new l.Z(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polygon"}break;case"point":switch(n){case"x":case"y":case"z":case"m":return void 0!==e[n]?e[n]:null;case"type":return"Point"}break;case"polyline":switch(n){case"paths":return o=e.cache._arcadeCacheId,void 0===o&&(V++,o=V,e.cache._arcadeCacheId=o),new l.Z(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polyline"}break;case"multipoint":switch(n){case"points":return o=e.cache._arcadeCacheId,void 0===o&&(V++,o=V,e.cache._arcadeCacheId=o),new u.Z(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,o,1);case"type":return"Multipoint"}}throw new Error((0,f.H5)(r,"RUNTIME","PROPERTYNOTFOUND"))}function G(e,n){return(0,v.Ue)(((t,r)=>{const o=n.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[o])if(void 0===e.globalScope[o])r(new Error((0,f.H5)(n,"RUNTIME","VARIABLENOTFOUND")));else{const n=e.globalScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=D(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}else{const n=e.localScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=D(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}}))}const W={};function J(e){return null===e?"":(0,s.a)(e)||(0,s.b)(e)?"Array":(0,s.n)(e)?"Date":(0,s.f)(e)?"String":(0,s.i)(e)?"Boolean":(0,s.j)(e)?"Number":e instanceof o.Z?"Attachment":e instanceof r.Z?"Portal":e instanceof a.Z?"Dictionary":e instanceof i.Z?"Feature":e instanceof b.Z?"Point":e instanceof R.Z?"Polygon":e instanceof S.Z?"Polyline":e instanceof A.Z?"Multipoint":e instanceof I.Z?"Extent":(0,s.c)(e)?"Function":(0,s.o)(e)?"FeatureSet":(0,s.q)(e)?"FeatureSetCollection":e===s.v?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function q(e,n,t,r){return(0,v.Ue)(((o,a)=>{D(e,n.arguments[t]).then((i=>{try{if((0,s.e)(i,r))return void D(e,n.arguments[t+1]).then(o,a);{const i=n.arguments.length-t;return 1===i?void D(e,n.arguments[t]).then(o,a):(2===i&&o(null),3===i?void D(e,n.arguments[t+2]).then(o,a):void q(e,n,t+2,r).then(o,a))}}catch(e){a(e)}}),a)}))}function $(e,n,t,r){return(0,v.Ue)(((o,a)=>{!0===r?D(e,n.arguments[t+1]).then(o,a):3==n.arguments.length-t?D(e,n.arguments[t+2]).then(o,a):D(e,n.arguments[t+2]).then((r=>{try{if(!1===(0,s.i)(r))return void a(new Error("WHEN needs boolean test conditions"));$(e,n,t+2,r).then(o,a)}catch(e){a(e)}}))}))}function K(e,n){try{const t=e.length,r=Math.floor(t/2);return 0===t?(0,v.DB)([]):1===t?(0,v.DB)([e[0]]):(0,v.Ue)(((o,a)=>{const i=[K(e.slice(0,r),n),K(e.slice(r,t),n)];(0,v.$6)(i).then((e=>{try{Q(e[0],e[1],n,[]).then(o,a)}catch(e){a(e)}}),a)}))}catch(e){return U(e)}}function Q(e,n,t,r){return(0,v.Ue)(((o,a)=>{const i=r;e.length>0||n.length>0?e.length>0&&n.length>0?t(e[0],n[0]).then((c=>{try{isNaN(c)&&(c=1),c<=0?(i.push(e[0]),e=e.slice(1)):(i.push(n[0]),n=n.slice(1)),Q(e,n,t,r).then(o,a)}catch(e){a(e)}}),a):e.length>0?(i.push(e[0]),Q(e=e.slice(1),n,t,r).then(o,a)):n.length>0&&(i.push(n[0]),n=n.slice(1),Q(e,n,t,r).then(o,a)):o(r)}))}function X(e,n){const t=e.length,r=Math.floor(t/2);return n||(n=function(e,n){return e<n?-1:e===n?0:1}),0===t?[]:1===t?[e[0]]:function(e,n,t){const r=[];for(;e.length>0||n.length>0;)if(e.length>0&&n.length>0){let o=t(e[0],n[0]);isNaN(o)&&(o=1),o<=0?(r.push(e[0]),e=e.slice(1)):(r.push(n[0]),n=n.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):n.length>0&&(r.push(n[0]),n=n.slice(1));return r}(X(e.slice(0,r),n),X(e.slice(r,t),n),n)}function ee(e,n,t){try{const r=e.body;if(t.length!==e.params.length)return U(new Error("Invalid Parameter calls to function."));for(let r=0;r<t.length;r++){const o=e.params[r];"Identifier"===o.type&&(n.localScope[o.name.toLowerCase()]={d:null,value:t[r],valueset:!0,node:null})}return D(n,r).then((e=>(0,v.Ue)(((n,t)=>{e instanceof s.R?n(e.value):e!==s.k?e!==s.m?n(e instanceof s.I?e.value:e):t(new Error("Cannot Continue from a Function")):t(new Error("Cannot Break from a Function"))}))))}catch(e){return(0,v.d1)(e)}}function ne(e,n,t){return x(e,n,(function(n,r,o){const a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return ee(t,a,o)}))}function te(e){return function(){const n={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(n.depthCounter>64)throw new Error("Exceeded maximum function depth");return ee(e.definition,n,arguments)}}(0,d.r)(W,O),(0,p.r)(W,O),(0,E.r)(W,O),(0,m.r)(W,O),(0,w.r)(W,O),(0,y.r)(W,O),(0,g.registerFunctions)({functions:W,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:O,standardFunctionAsync:x}),W.typeof=function(e,n){return O(e,n,(function(e,n,t){(0,s.p)(t,1,1);const r=J(t[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},W.iif=function(e,n){return(0,v.Ue)(((t,r)=>{(0,s.p)(null===n.arguments?[]:n.arguments,3,3),D(e,n.arguments[0]).then((o=>{try{if(!1===(0,s.i)(o))return void r(new Error("IF Function must have a boolean test condition"));(0,v.$6)([D(e,n.arguments[1]),D(e,n.arguments[2])]).then((e=>{t(o?e[0]:e[1])}),r)}catch(e){r(e)}}),r)}))},W.decode=function(e,n){return(0,v.Ue)(((t,r)=>{n.arguments.length<2?r(new Error("Missing Parameters")):2!==n.arguments.length?(n.arguments.length-1)%2!=0?D(e,n.arguments[0]).then((o=>{try{q(e,n,1,o).then(t,r)}catch(e){r(e)}}),r):r(new Error("Must have a default value result.")):D(e,n.arguments[1]).then(t,r)}))},W.when=function(e,n){try{return n.arguments.length<3?U("Missing Parameters"):n.arguments.length%2==0?U("Must have a default value result."):D(e,n.arguments[0]).then((t=>(0,v.Ue)(((r,o)=>{!1!==(0,s.i)(t)?$(e,n,0,t).then(r,o):o(new Error("WHEN needs boolean test conditions"))}))))}catch(e){return U(e)}},W.sort=function(e,n){return x(e,n,(function(e,n,t){(0,s.p)(t,1,2);let r=t[0];if((0,s.b)(r)&&(r=r.toArray()),!1===(0,s.a)(r))return U(Error("Illegal Argument"));if(t.length>1)return!1===(0,s.c)(t[1])?U(Error("Illegal Argument")):K(r,te(t[1]));{let e=r;if(0===e.length)return(0,v.DB)([]);const n={};for(let t=0;t<e.length;t++){const r=J(e[t]);""!==r&&(n[r]=!0)}if(!0===n.Array||!0===n.Dictionary||!0===n.Feature||!0===n.Point||!0===n.Polygon||!0===n.Polyline||!0===n.Multipoint||!0===n.Extent||!0===n.Function)return(0,v.DB)(e.slice(0));let t=0,o="";for(const e in n)t++,o=e;return t>1||"String"===o?e=X(e,(function(e,n){if(null==e||e===s.v)return null==n||n===s.v?0:1;if(null==n||n===s.v)return-1;const t=(0,s.d)(e),r=(0,s.d)(n);return t<r?-1:t===r?0:1})):"Number"===o?e=X(e,(function(e,n){return e-n})):"Boolean"===o?e=X(e,(function(e,n){return e===n?0:n?-1:1})):"Date"===o&&(e=X(e,(function(e,n){return n-e}))),(0,v.DB)(e)}}))};const re={failDefferred:U,resolveDeffered:T,fixSpatialReference:s.r,parseArguments:F,standardFunction:O,standardFunctionAsync:x,evaluateIdentifier:G,arcadeCustomFunction:te};for(const e in W)W[e]={value:new s.N(W[e]),valueset:!0,node:null};const oe=function(){};function ae(e){console.log(e)}(oe.prototype=W).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},oe.prototype.pi={value:Math.PI,valueset:!0,node:null};const ie=re;function ce(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:O,standardFunctionAsync:x,failDefferred:U,evaluateIdentifier:G,arcadeCustomFunctionHandler:te};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)W[e]={value:new s.N(n.functions[e]),valueset:!0,node:null},oe.prototype[e]=W[e];for(let e=0;e<n.signatures.length;e++)(0,f.gW)(n.signatures[e],"async")}function le(e,n){let t=n.spatialReference;null==t&&(t=new C.Z({wkid:102100}));const r=function(e,n){const t=new oe;null==e&&(e={}),null==n&&(n={});const r=new a.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const e in n)t[e]={value:new s.N(n[e]),native:!0,valueset:!0,node:null};for(const n in e)e[n]&&"esri.Graphic"===e[n].declaredClass?t[n]={value:i.Z.createFromGraphic(e[n]),valueset:!0,node:null}:t[n]={value:e[n],valueset:!0,node:null};return t}(n.vars,n.customfunctions);return D({spatialReference:t,services:n.services,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:r,console:n.console?n.console:ae,lrucache:n.lrucache,interceptor:n.interceptor,localScope:null,depthCounter:1},e.body[0].body).then((e=>(0,v.Ue)(((n,t)=>{e instanceof s.R&&(e=e.value),e instanceof s.I&&(e=e.value),e===s.v&&(e=null),e!==s.k?e!==s.m?e instanceof s.N||e instanceof c.Z?t(new Error("Cannot return FUNCTION")):n(e):t(new Error("Cannot return CONTINUE")):t(new Error("Cannot return BREAK"))}))))}function ue(e,n){return(0,f.mb)(e)}function se(e,n){return(0,f.FS)(e,n,"full")}function fe(e,n){return(0,f.bV)(e,n)}function he(e,n){return(0,f.w8)(e,n)}function de(e){return(0,f.Vf)(e)}},88163:(e,n,t)=>{t.r(n),t.d(n,{registerFunctions:()=>v});var r=t(88256),o=t(4080),a=t(94837),i=t(5306),c=t(78668),l=t(91772),u=t(20031),s=t(15917),f=t(74304),h=t(53446),d=t(89542),p=t(90819),g=t(53736),w=t(17321);function m(e){return 0===r.i8.indexOf("4.")?d.Z.fromExtent(e):new d.Z({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function y(e){if((0,a.p)(e,2,2),e[0]instanceof u.Z&&e[1]instanceof u.Z);else if(e[0]instanceof u.Z&&null===e[1]);else if(e[1]instanceof u.Z&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function E(e,n){if("polygon"!==e.type&&"polyline"!==e.type&&"extent"!==e.type)return(0,c.DB)(0);let t=1;(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid)&&(t=(0,i._R)(e.spatialReference)/(0,w.c9)(e.spatialReference));let r=0;if("polyline"===e.type)for(const n of e.paths)for(let e=1;e<n.length;e++)r+=(0,i.AW)(n[e],n[e-1],t);else if("polygon"===e.type)for(const n of e.rings){for(let e=1;e<n.length;e++)r+=(0,i.AW)(n[e],n[e-1],t);(n[0][0]!==n[n.length-1][0]||n[0][1]!==n[n.length-1][1]||void 0!==n[0][2]&&n[0][2]!==n[n.length-1][2])&&(r+=(0,i.AW)(n[0],n[n.length-1],t))}else"extent"===e.type&&(r+=2*(0,i.AW)([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],t),r+=2*(0,i.AW)([e.xmin,e.ymin,0],[e.xmin,e.ymax,0],t),r*=2,r+=4*Math.abs((0,a.C)(e.zmax,0)*t-(0,a.C)(e.zmin,0)*t));const o=new p.Z({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:[[0,0],[0,r]]});return(0,s.sz)(o,n)}function v(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null===t[0]||null===t[1]||(0,s.ED)(t[0],t[1])}))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,s.kK)(t[0],t[1])}))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,s.W4)(t[0],t[1])}))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,s.jU)(t[0],t[1])}))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,s.uh)(t[0],t[1])}))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,s.r3)(t[0],t[1])}))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null!==t[0]&&null!==t[1]&&(0,s.Nm)(t[0],t[1])}))},e.functions.equals=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return(0,a.p)(t,2,2),t[0]===t[1]||(t[0]instanceof u.Z&&t[1]instanceof u.Z?(0,s.fS)(t[0],t[1]):!(!(0,a.n)(t[0])||!(0,a.n)(t[1]))&&t[0].getTime()===t[1].getTime())}))},e.functions.relate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,3,3),t[0]instanceof u.Z&&t[1]instanceof u.Z)return(0,s.LV)(t[0],t[1],(0,a.d)(t[2]));if(t[0]instanceof u.Z&&null===t[1])return!1;if(t[1]instanceof u.Z&&null===t[0])return!1;if(null===t[0]&&null===t[1])return!1;throw new Error("Illegal Argument")}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null===t[0]||null===t[1]?null:(0,s.wf)(t[0],t[1])}))},e.functions.union=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){const i=[];if(0===(r=(0,a.H)(r)).length)throw new Error("Function called with wrong number of Parameters");if(1===r.length)if((0,a.a)(r[0])){const e=(0,a.H)(r[0]);for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof u.Z))throw new Error("Illegal Argument");i.push(e[n])}}else{if(!(0,a.b)(r[0])){if(r[0]instanceof u.Z)return(0,a.r)((0,o.r1)(r[0]),n.spatialReference);if(null===r[0])return null;throw new Error("Illegal Argument")}{const e=(0,a.H)(r[0].toArray());for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof u.Z))throw new Error("Illegal Argument");i.push(e[n])}}}else for(let e=0;e<r.length;e++)if(null!==r[e]){if(!(r[e]instanceof u.Z))throw new Error("Illegal Argument");i.push(r[e])}return 0===i.length?null:(0,s.G0)(i)}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null!==t[0]&&null===t[1]?(0,o.r1)(t[0]):null===t[0]?null:(0,s.e5)(t[0],t[1])}))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return y(t=(0,a.H)(t)),null===t[0]&&null===t[1]?null:null===t[0]?(0,o.r1)(t[1]):null===t[1]?(0,o.r1)(t[0]):(0,s.Sp)(t[0],t[1])}))},e.functions.clip=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,2),!(t[1]instanceof l.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");return null===t[1]?null:(0,s.oq)(t[0],t[1])}))},e.functions.cut=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,2),!(t[1]instanceof p.Z)&&null!==t[1])throw new Error("Illegal Argument");if(null===t[0])return[];if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");return null===t[1]?[(0,o.r1)(t[0])]:(0,s.z7)(t[0],t[1])}))},e.functions.area=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.o)(r[0]))return r[0].sumArea((0,o.EI)((0,a.C)(r[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,a.a)(r[0])||(0,a.b)(r[0])){const e=(0,a.K)(r[0],n.spatialReference);return null===e?0:(0,s.CJ)(e,(0,o.EI)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof u.Z))throw new Error("Illegal Argument");return(0,s.CJ)(r[0],(0,o.EI)((0,a.C)(r[1],-1)))}))},e.functions.areageodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.o)(r[0]))return r[0].sumArea((0,o.EI)((0,a.C)(r[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,a.a)(r[0])||(0,a.b)(r[0])){const e=(0,a.K)(r[0],n.spatialReference);return null===e?0:(0,s.Y4)(e,(0,o.EI)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof u.Z))throw new Error("Illegal Argument");return(0,s.Y4)(r[0],(0,o.EI)((0,a.C)(r[1],-1)))}))},e.functions.length=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.o)(r[0]))return r[0].sumLength((0,o.Lz)((0,a.C)(r[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,a.a)(r[0])||(0,a.b)(r[0])){const e=(0,a.J)(r[0],n.spatialReference);return null===e?0:(0,s.sz)(e,(0,o.Lz)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof u.Z))throw new Error("Illegal Argument");return(0,s.sz)(r[0],(0,o.Lz)((0,a.C)(r[1],-1)))}))},e.functions.length3d=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.a)(r[0])||(0,a.b)(r[0])){const e=(0,a.J)(r[0],n.spatialReference);return null===e?0:!0===e.hasZ?E(e,(0,o.Lz)((0,a.C)(r[1],-1))):(0,s.sz)(e,(0,o.Lz)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof u.Z))throw new Error("Illegal Argument");return!0===r[0].hasZ?E(r[0],(0,o.Lz)((0,a.C)(r[1],-1))):(0,s.sz)(r[0],(0,o.Lz)((0,a.C)(r[1],-1)))}))},e.functions.lengthgeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){if((0,a.p)(r,1,2),null===(r=(0,a.H)(r))[0])return 0;if((0,a.o)(r[0]))return r[0].sumLength((0,o.Lz)((0,a.C)(r[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if((0,a.a)(r[0])||(0,a.b)(r[0])){const e=(0,a.J)(r[0],n.spatialReference);return null===e?0:(0,s.kQ)(e,(0,o.Lz)((0,a.C)(r[1],-1)))}if(!(r[0]instanceof u.Z))throw new Error("Illegal Argument");return(0,s.kQ)(r[0],(0,o.Lz)((0,a.C)(r[1],-1)))}))},e.functions.distance=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){r=(0,a.H)(r),(0,a.p)(r,2,3);let i=r[0];((0,a.a)(r[0])||(0,a.b)(r[0]))&&(i=(0,a.L)(r[0],n.spatialReference));let c=r[1];if(((0,a.a)(r[1])||(0,a.b)(r[1]))&&(c=(0,a.L)(r[1],n.spatialReference)),!(i instanceof u.Z))throw new Error("Illegal Argument");if(!(c instanceof u.Z))throw new Error("Illegal Argument");return(0,s.TE)(i,c,(0,o.Lz)((0,a.C)(r[2],-1)))}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,a.H)(t),(0,a.p)(t,2,3);const r=t[0],i=t[1];if(!(r instanceof h.Z))throw new Error("Illegal Argument");if(!(i instanceof h.Z))throw new Error("Illegal Argument");const c=new p.Z({paths:[],spatialReference:r.spatialReference});return c.addPath([r,i]),(0,s.kQ)(c,(0,o.Lz)((0,a.C)(t[2],-1)))}))},e.functions.densify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");const r=(0,a.t)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");if(r<=0)throw new Error("Illegal Argument");return t[0]instanceof d.Z||t[0]instanceof p.Z?(0,s.Cz)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]instanceof l.Z?(0,s.Cz)(m(t[0]),r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]}))},e.functions.densifygeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");const r=(0,a.t)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");if(r<=0)throw new Error("Illegal Argument");return t[0]instanceof d.Z||t[0]instanceof p.Z?(0,s.j2)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]instanceof l.Z?(0,s.j2)(m(t[0]),r,(0,o.Lz)((0,a.C)(t[2],-1))):t[0]}))},e.functions.generalize=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,4),null===t[0])return null;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");const r=(0,a.t)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return(0,s.D$)(t[0],r,(0,a.u)((0,a.C)(t[2],!0)),(0,o.Lz)((0,a.C)(t[3],-1)))}))},e.functions.buffer=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");const r=(0,a.t)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return 0===r?(0,o.r1)(t[0]):(0,s.f3)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1)))}))},e.functions.buffergeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,3),null===t[0])return null;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");const r=(0,a.t)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");return 0===r?(0,o.r1)(t[0]):(0,s.rd)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1)))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,2,6),null===t[0])return null;if(!(t[0]instanceof d.Z||t[0]instanceof p.Z))throw new Error("Illegal Argument");const r=(0,a.t)(t[1]);if(isNaN(r))throw new Error("Illegal Argument");const i=(0,a.t)((0,a.C)(t[4],10));if(isNaN(i))throw new Error("Illegal Argument");const c=(0,a.t)((0,a.C)(t[5],0));if(isNaN(c))throw new Error("Illegal Argument");return(0,s.cv)(t[0],r,(0,o.Lz)((0,a.C)(t[2],-1)),(0,a.d)((0,a.C)(t[3],"round")).toLowerCase(),i,c)}))},e.functions.rotate=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=(0,a.H)(t),(0,a.p)(t,2,3);let r=t[0];if(null===r)return null;if(!(r instanceof u.Z))throw new Error("Illegal Argument");r instanceof l.Z&&(r=d.Z.fromExtent(r));const o=(0,a.t)(t[1]);if(isNaN(o))throw new Error("Illegal Argument");const i=(0,a.C)(t[2],null);if(null===i)return(0,s.U1)(r,o);if(i instanceof h.Z)return(0,s.U1)(r,o,i);throw new Error("Illegal Argument")}))},e.functions.centroid=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){if(r=(0,a.H)(r),(0,a.p)(r,1,1),null===r[0])return null;let c=r[0];if(((0,a.a)(r[0])||(0,a.b)(r[0]))&&(c=(0,a.L)(r[0],n.spatialReference)),null===c)return null;if(!(c instanceof u.Z))throw new Error("Illegal Argument");return c instanceof h.Z?(0,a.r)((0,o.r1)(r[0]),n.spatialReference):c instanceof d.Z?c.centroid:c instanceof p.Z?(0,i.s9)(c):c instanceof f.Z?(0,i.Ay)(c):c instanceof l.Z?c.center:null}))},e.functions.multiparttosinglepart=function(n,t){return e.standardFunctionAsync(n,t,(function(e,t,r){r=(0,a.H)(r),(0,a.p)(r,1,1);const i=[];if(null===r[0])return null;if(!(r[0]instanceof u.Z))throw new Error("Illegal Argument");return r[0]instanceof h.Z||r[0]instanceof l.Z?[(0,a.r)((0,o.r1)(r[0]),n.spatialReference)]:(0,s.og)(r[0]).then((e=>{if(e instanceof d.Z){const n=[],t=[];for(let r=0;r<e.rings.length;r++)if(e.isClockwise(e.rings[r])){const t=(0,g.im)({rings:[e.rings[r]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(t)}else t.push({ring:e.rings[r],pt:e.getPoint(r,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(e instanceof p.Z){const n=[];for(let t=0;t<e.paths.length;t++){const r=(0,g.im)({paths:[e.paths[t]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(r)}return n}if(r[0]instanceof f.Z){const e=(0,a.r)((0,o.r1)(r[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)i.push(e.getPoint(n));return i}return null}))}))},e.functions.issimple=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,1,1),null===t[0])return!0;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");return(0,s.Gg)(t[0])}))},e.functions.simplify=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=(0,a.H)(t),(0,a.p)(t,1,1),null===t[0])return null;if(!(t[0]instanceof u.Z))throw new Error("Illegal Argument");return(0,s.og)(t[0])}))})}},15917:(e,n,t)=>{t.d(n,{f3:()=>U,oq:()=>s,r3:()=>h,jU:()=>d,z7:()=>f,Cz:()=>x,e5:()=>b,ED:()=>E,TE:()=>p,fS:()=>g,D$:()=>O,Y4:()=>k,rd:()=>T,j2:()=>D,kQ:()=>M,wf:()=>S,kK:()=>w,Gg:()=>N,cv:()=>Z,Nm:()=>v,CJ:()=>H,sz:()=>L,LV:()=>I,U1:()=>F,og:()=>A,Sp:()=>R,W4:()=>m,G0:()=>C,uh:()=>y}),t(91957);var r=t(47109),o=(t(53446),t(53736));function a(e){var n;return Array.isArray(e)?null==(n=e[0])?void 0:n.spatialReference:null==e?void 0:e.spatialReference}function i(e){return e?Array.isArray(e)?e.map(i):e.toJSON?e.toJSON():e:e}function c(e){return Array.isArray(e)?e.map((e=>(0,o.im)(e))):(0,o.im)(e)}let l;async function u(e,n){return(await async function(){return l||(l=(0,r.bA)("geometryEngineWorker",{strategy:"distributed"})),l}()).invoke("executeGEOperation",{operation:e,parameters:i(n)})}async function s(e,n){return c(await u("clip",[a(e),e,n]))}async function f(e,n){return c(await u("cut",[a(e),e,n]))}function h(e,n){return u("contains",[a(e),e,n])}function d(e,n){return u("crosses",[a(e),e,n])}function p(e,n,t){return u("distance",[a(e),e,n,t])}function g(e,n){return u("equals",[a(e),e,n])}function w(e,n){return u("intersects",[a(e),e,n])}function m(e,n){return u("touches",[a(e),e,n])}function y(e,n){return u("within",[a(e),e,n])}function E(e,n){return u("disjoint",[a(e),e,n])}function v(e,n){return u("overlaps",[a(e),e,n])}function I(e,n,t){return u("relate",[a(e),e,n,t])}function N(e){return u("isSimple",[a(e),e])}async function A(e){return c(await u("simplify",[a(e),e]))}async function b(e,n){return c(await u("difference",[a(e),e,n]))}async function R(e,n){return c(await u("symmetricDifference",[a(e),e,n]))}async function S(e,n){return c(await u("intersect",[a(e),e,n]))}async function C(e,n=null){const t=function(e,n){let t;return Array.isArray(e)?t=e:(t=[],t.push(e),null!=n&&t.push(n)),t}(e,n);return c(await u("union",[a(t),t]))}async function Z(e,n,t,r,o,i){return c(await u("offset",[a(e),e,n,t,r,o,i]))}async function U(e,n,t,r=!1){const o=[a(e),e,n,t,r];return c(await u("buffer",o))}async function T(e,n,t,r,o,i){const l=[a(e),e,n,t,r,o,i];return c(await u("geodesicBuffer",l))}async function F(e,n,t){var r;if(null==e)throw new Error("Illegal Argument Exception");const o=e.spatialReference;t=null!=(r=t)?r:function(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}(e);const a=e.constructor.fromJSON(await u("rotate",[o,e,n,t]));return a.spatialReference=o,a}async function O(e,n,t,r){return c(await u("generalize",[a(e),e,n,t,r]))}async function x(e,n,t){return c(await u("densify",[a(e),e,n,t]))}async function D(e,n,t,r=0){return c(await u("geodesicDensify",[a(e),e,n,t,r]))}function H(e,n){return u("planarArea",[a(e),e,n])}function L(e,n){return u("planarLength",[a(e),e,n])}function k(e,n,t){return u("geodesicArea",[a(e),e,n,t])}function M(e,n,t){return u("geodesicLength",[a(e),e,n,t])}}}]);