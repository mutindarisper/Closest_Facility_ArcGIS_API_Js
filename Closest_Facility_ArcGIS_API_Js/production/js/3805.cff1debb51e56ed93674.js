"use strict";(self.webpackChunkarcgis_rm=self.webpackChunkarcgis_rm||[]).push([[3805],{3805:(e,n,l)=>{l.r(n),l.d(n,{getDataValues:()=>s,summaryStatistics:()=>r});var t=l(19431),a=l(14685),i=l(8638),u=l(30879);let o=null;async function r(e){const{attribute:n,featuresJSON:l}=e,{normalizationType:t,normalizationField:a,minValue:u,maxValue:o,fieldType:r}=n,c=await s({field:n.field,valueExpression:n.valueExpression,normalizationType:t,normalizationField:a,normalizationTotal:n.normalizationTotal,viewInfoParams:n.viewInfoParams},l),m=(0,i.S5)({normalizationType:t,normalizationField:a,minValue:u,maxValue:o}),f="string"===r?(0,i.H0)({values:c,supportsNullCount:m}):(0,i.i5)({values:c,minValue:u,maxValue:o,useSampleStdDev:!t,supportsNullCount:m});return(0,i.rt)(f,"date"===r)}async function s(e,n){if(!n)return[];const l=e.field,r=e.valueExpression,s=e.normalizationType,c=e.normalizationField,m=e.normalizationTotal,f=[],p=e.viewInfoParams;let d=null,v=null;if(r){if(!o){const{arcadeUtils:e}=await(0,u.LC)();o=e}d=o.createFunction(r),v=p&&o.getViewInfo({viewingMode:p.viewingMode,scale:p.scale,spatialReference:new a.Z(p.spatialReference)})}return n.forEach((e=>{const n=e.attributes;let a;if(r){const n=o.createExecContext(e,v);a=o.executeFunction(d,n)}else n&&(a=n[l]);if(s&&(0,t.xV)(a)){const e=n&&parseFloat(n[c]);a=(0,i.fk)(a,s,e,m)}f.push(a)})),f}},8638:(e,n,l)=>{function t(e){const n=null!=e.normalizationField||null!=e.normalizationType,l=null!=e.minValue||null!=e.maxValue,t=!!e.sqlExpression&&e.supportsSQLExpression;return!n&&!l&&!t}function a(e){const n=e.returnDistinct?[...new Set(e.values)]:e.values,l=n.filter((e=>null!=e)).length,t={count:l};return e.supportsNullCount&&(t.nullcount=n.length-l),t}function i(e){const{values:n,useSampleStdDev:l,supportsNullCount:t}=e;let a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,u=null,o=null,r=null,s=null,c=0;const m=null==e.minValue?-1/0:e.minValue,f=null==e.maxValue?1/0:e.maxValue;for(const e of n)Number.isFinite(e)?e>=m&&e<=f&&(u+=e,a=Math.min(a,e),i=Math.max(i,e),c++):"string"==typeof e&&c++;if(c&&null!=u){o=u/c;let e=0;for(const l of n)Number.isFinite(l)&&l>=m&&l<=f&&(e+=(l-o)**2);s=l?c>1?e/(c-1):0:c>0?e/c:0,r=Math.sqrt(s)}else a=null,i=null;const p={avg:o,count:c,max:i,min:a,stddev:r,sum:u,variance:s};return t&&(p.nullcount=n.length-c),p}function u(e,n){return n?(["avg","stddev","variance"].forEach((n=>{null!=e[n]&&(e[n]=Math.ceil(e[n]))})),e):e}function o(e,n,l,t){let a=null;switch(n){case"log":0!==e&&(a=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(t)&&0!==t&&(a=e/t*100);break;case"field":Number.isFinite(l)&&0!==l&&(a=e/l);break;case"natural-log":e>0&&(a=Math.log(e));break;case"square-root":e>0&&(a=e**.5)}return a}l.d(n,{i5:()=>i,H0:()=>a,fk:()=>o,S5:()=>t,rt:()=>u}),l(70375),l(17095)}}]);