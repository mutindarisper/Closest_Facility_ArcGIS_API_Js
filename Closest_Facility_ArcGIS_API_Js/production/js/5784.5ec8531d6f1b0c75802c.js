"use strict";(self.webpackChunkarcgis_rm=self.webpackChunkarcgis_rm||[]).push([[5784],{15875:(e,t,r)=>{r.d(t,{mR:()=>W,C$:()=>S,e2:()=>y,wO:()=>F,Mk:()=>G,cM:()=>V,Z_:()=>k,ws:()=>C,xV:()=>D,UK:()=>B,Yw:()=>H,$_:()=>I,nU:()=>b,$K:()=>P,hj:()=>v,Y8:()=>R});var i=r(70375),n=r(13802),a=(r(19431),r(62173),r(38716)),o=r(34596);class s{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(e,t,r,i,n,a,o,s,c){this.color=e,this.haloColor=t,this.haloSize=r,this.size=i,this.angle=n,this.offsetX=a,this.offsetY=o,this.hAnchor=s,this.vAnchor=c}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}s.pool=new o.Z(s),r(43487);const c=n.Z.getLogger("esri.views.2d.engine.webgl.Utils"),u="geometry",h=[{name:u,strideInBytes:36,divisor:0}],l=[{name:u,strideInBytes:12,divisor:0}],p=[{name:u,strideInBytes:40,divisor:0}],d=[{name:u,strideInBytes:36,divisor:0}],_=[{name:u,strideInBytes:36,divisor:0}];function T(e){const t={};for(const r of e)t[r.name]=r.strideInBytes;return t}const E=T([{name:u,strideInBytes:36,divisor:0}]),f=T(h),m=T(l),g=T(p),L=T(d),A=T(_);function I(e,t){switch(e){case a.LW.MARKER:return E;case a.LW.FILL:return t?m:f;case a.LW.LINE:return g;case a.LW.TEXT:return L;case a.LW.LABEL:return A}}const M=[u],w=[u],x=[u],U=[u],N=[u];function O(e){switch(e){case a.LW.MARKER:return M;case a.LW.FILL:return w;case a.LW.LINE:return x;case a.LW.TEXT:return U;case a.LW.LABEL:return N}}function R(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function S(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}}function y(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}}function P(e){return null!=e}function v(e){return"number"==typeof e}function C(e){switch(e){case"butt":return 0;case"round":return 1;case"square":return 2;default:return c.error(new i.Z("mapview-invalid-type",`Cap type ${e} is not a valid option. Defaulting to round`)),1}}function D(e){switch(e){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return c.error(new i.Z("mapview-invalid-type",`Join type ${e} is not a valid option. Defaulting to round`)),1}}function b(e){switch(e){case"opacity":return a.pc.OPACITY;case"color":return a.pc.COLOR;case"rotation":return a.pc.ROTATION;case"size":return a.pc.SIZE;default:return c.error(`Cannot interpret unknown vv: ${e}`),null}}function F(e,t,r,i,n,a,o){for(const t in a){const i=a[t].stride,o=R(i),s=a[t].data,c=r[t].data,u=i*n.vertexCount/o,h=i*e/o,l=i*n.vertexFrom/o;for(let e=0;e<u;++e)c[e+h]=s[e+l]}const s=n.indexCount;for(let r=0;r<s;++r)i[r+t]=o[r+n.indexFrom]-n.vertexFrom+e}const W={[u]:35044};function G(e,t){const r=[];for(let i=0;i<5;++i){const n=O(i),a={};for(const e of n)a[e]={data:t(i,e)};r.push({data:e(i),buffers:a})}return r}function X(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}function H(e){switch(e){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void c.error(new i.Z("webgl-utils",`Unable to handle type ${e}`))}}function B(e){switch(e){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void c.error(new i.Z("webgl-utils",`Unable to handle type ${e}`))}}const Z=e=>{const t=new Map;for(const r in e)for(const i of e[r])t.set(i.name,i.location);return t},z=e=>{const t={};for(const r in e){const i=e[r];t[r]=i.length?i[0].stride:0}return t},Y=new Map,V=(e,t)=>{if(!Y.has(e)){const r=function(e){const t={};for(const r in e){const i=e[r];let n=0;t[r]=i.map((e=>{const t={...e,normalized:e.normalized||!1,divisor:e.divisor||0,offset:n,stride:0};return n+=e.count*X(e.type),t})),t[r].forEach((e=>e.stride=n))}return t}(t),i={strides:z(r),bufferLayouts:r,attributes:Z(t)};Y.set(e,i)}return Y.get(e)};function k(e){e(a.LW.FILL),e(a.LW.LINE),e(a.LW.MARKER),e(a.LW.TEXT),e(a.LW.LABEL)}},62173:(e,t,r)=>{r.d(t,{pr:()=>n,t2:()=>a,aH:()=>o});var i=r(8530);function n(e,t=0,r=!1){const i=e[t+3];return e[t+0]*=i,e[t+1]*=i,e[t+2]*=i,r||(e[t+3]*=255),e}function a(e){if(!e)return 0;const{r:t,g:r,b:n,a}=e;return(0,i.Jz)(t*a,r*a,n*a,255*a)}function o(e){if(!e)return 0;const[t,r,n,a]=e;return(0,i.Jz)(t*(a/255),r*(a/255),n*(a/255),a)}},14266:(e,t,r)=>{r.d(t,{xl:()=>A,aK:()=>I,eF:()=>u,XJ:()=>v,$0:()=>o,iV:()=>U,Zd:()=>x,uG:()=>w,Jc:()=>O,xm:()=>s,m4:()=>M,MI:()=>D,AI:()=>i,Ip:()=>C,ru:()=>n,fL:()=>P,iJ:()=>d,nM:()=>_,Ij:()=>T,f2:()=>E,Ic:()=>p,Al:()=>l,QU:()=>f,Jw:()=>m,kF:()=>g,yP:()=>L,D3:()=>h,Iw:()=>c,tQ:()=>N,I_:()=>a,a:()=>y,CU:()=>S,V4:()=>R});const i=1e-30,n=4294967295,a=512,o=8,s=29,c=8,u={metrics:{width:15,height:17,left:0,top:-7,advance:14}},h=0,l=0,p=0,d=1,_=2,T=3,E=4,f=5,m=6,g=5,L=6,A=1,I=2,M=2,w=1,x=2,U=4,N=1.05,O=6,R=5,S=6,y=1.15,P=2,v=8,C=500,D=10},38716:(e,t,r)=>{var i,n,a,o,s,c,u;r.d(t,{Un:()=>u,pc:()=>o,jx:()=>a,LW:()=>i,X:()=>s,mf:()=>c}),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"}(i||(i={})),function(e){e[e.SUCCEEDED=0]="SUCCEEDED",e[e.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(n||(n={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(a||(a={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(o||(o={})),function(e){e[e.NONE=0]="NONE",e[e.OPACITY=1]="OPACITY",e[e.COLOR=2]="COLOR",e[e.ROTATION=4]="ROTATION",e[e.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",e[e.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",e[e.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",e[e.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(s||(s={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(c||(c={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(u||(u={}))},8530:(e,t,r)=>{r.d(t,{UJ:()=>a,Jz:()=>o,Au:()=>n});const i=new Float32Array(1);function n(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function a(e,t){return 65535&e|t<<16}function o(e,t,r,i){return 255&e|(255&t)<<8|(255&r)<<16|i<<24}new Uint32Array(i.buffer)},43487:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(19431),n=r(61681),a=r(6174),o=r(91907),s=r(79193);class c{constructor(e,t,r=null){this._context=e,this.type="texture",this._glName=null,this._descriptor=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,e.instanceCounter.increment(o._g.Texture,this),this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...t},34067===this._descriptor.target?this.setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}dispose(){this._context.gl&&this._glName&&(this._context.unbindTextureAllUnits(this),this._context.gl.deleteTexture(this._glName),this._glName=null,this._context.instanceCounter.decrement(o._g.Texture,this))}release(){this.dispose()}resize(e,t){const r=this._descriptor;r.width===e&&r.height===t||(r.width=e,r.height=t,34067===this._descriptor.target?this.setDataCubeMap(null):this.setData(null))}setDataCubeMap(e=null){for(let t=34069;t<=34074;t++)this.setData(e,t)}setData(e,t=3553){if(!this._context||!this._context.gl)return;const r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===e&&(e=null),null===e&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);const i=this._context.bindTexture(this,c.TEXTURE_UNIT_FOR_UPDATES),o=this._descriptor;c._validateTexture(this._context,o),r.pixelStorei(r.UNPACK_ALIGNMENT,o.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,o.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.preMultiplyAlpha?1:0);const s=o.pixelFormat;let u=o.internalFormat?o.internalFormat:this._deriveInternalFormat(s,o.dataType);if(e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement){let i=e.width,n=e.height;e instanceof HTMLVideoElement&&(i=e.videoWidth,n=e.videoHeight),o.width&&o.height,r.texImage2D(t,0,u,s,o.dataType,e),(0,a.zu)(r),o.hasMipmap&&this.generateMipmap(),void 0===o.width&&(o.width=i),void 0===o.height&&(o.height=n)}else{null!=o.width&&null!=o.height||console.error("Width and height must be specified!"),r.DEPTH24_STENCIL8&&u===r.DEPTH_STENCIL&&(u=r.DEPTH24_STENCIL8);let i=o.width,c=o.height;if(function(e){return(0,n.pC)(e)&&"type"in e&&"compressed"===e.type}(e)){const n=Math.round(Math.log(Math.max(i,c))/Math.LN2)+1;o.hasMipmap=o.hasMipmap&&n===e.levels.length;for(let n=0;;++n){const a=e.levels[Math.min(n,e.levels.length-1)];if(r.compressedTexImage2D(t,n,u,i,c,0,a),1===i&&1===c||!o.hasMipmap)break;i=Math.max(1,i>>1),c=Math.max(1,c>>1)}}else if((0,n.pC)(e))r.texImage2D(t,0,u,i,c,0,s,o.dataType,e),(0,a.zu)(r),o.hasMipmap&&this.generateMipmap();else for(let e=0;r.texImage2D(t,e,u,i,c,0,s,o.dataType,null),(0,a.zu)(r),(1!==i||1!==c)&&o.hasMipmap;++e)i=Math.max(1,i>>1),c=Math.max(1,c>>1)}c._applySamplingMode(r,this._descriptor),c._applyWrapMode(r,this._descriptor),c._applyAnisotropicFilteringParameters(this._context,this._descriptor),(0,a.zu)(r),this._context.bindTexture(i,c.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,t,r,i,n,a,o=3553){a||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const s=this._context.gl,u=this._descriptor,h=this._context.bindTexture(this,c.TEXTURE_UNIT_FOR_UPDATES);(t<0||r<0||i>u.width||n>u.height||t+i>u.width||r+n>u.height)&&console.error("An attempt to update out of bounds of the texture!"),s.pixelStorei(s.UNPACK_ALIGNMENT,u.unpackAlignment),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,u.flipped?1:0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u.preMultiplyAlpha?1:0),a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement?s.texSubImage2D(o,e,t,r,u.pixelFormat,u.dataType,a):s.texSubImage2D(o,e,t,r,i,n,u.pixelFormat,u.dataType,a),this._context.bindTexture(h,c.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;e.hasMipmap||(e.hasMipmap=!0,this._samplingModeDirty=!0,c._validateTexture(this._context,e)),9729===e.samplingMode?(this._samplingModeDirty=!0,e.samplingMode=9985):9728===e.samplingMode&&(this._samplingModeDirty=!0,e.samplingMode=9984);const t=this._context.bindTexture(this,c.TEXTURE_UNIT_FOR_UPDATES);this._context.gl.generateMipmap(e.target),this._context.bindTexture(t,c.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,c._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const e=this._context.gl,t=this._descriptor;this._samplingModeDirty&&(c._applySamplingMode(e,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(c._applyWrapMode(e,t),this._wrapModeDirty=!1)}_deriveInternalFormat(e,t){if("webgl"===this._context.webglVersion)return e;if(5126===t)switch(e){case 6408:return 34836;case 6407:return 34837;default:throw new Error("Unable to derive format")}return e}static _validateTexture(e,t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!");const r=(0,i.wt)(t.width)&&(0,i.wt)(t.height);(0,s.Z)(e.gl)||r||("number"==typeof t.wrapMode?33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):33071===t.wrapMode.s&&33071===t.wrapMode.t||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}static _applySamplingMode(e,t){let r=t.samplingMode,i=t.samplingMode;9985===r||9987===r?(r=9729,t.hasMipmap||(i=9729)):9984!==r&&9986!==r||(r=9728,t.hasMipmap||(i=9728)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,r),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,i)}static _applyWrapMode(e,t){"number"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}static _applyAnisotropicFilteringParameters(e,t){var r;const i=e.capabilities.textureFilterAnisotropic;i&&e.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,null!=(r=t.maxAnisotropy)?r:1)}}c.TEXTURE_UNIT_FOR_UPDATES=0},79193:(e,t,r)=>{function i(e){return window.WebGL2RenderingContext&&e instanceof window.WebGL2RenderingContext}r.d(t,{Z:()=>i})},6174:(e,t,r)=>{r.d(t,{zu:()=>u,hZ:()=>s,CG:()=>c});var i=r(70375),n=r(39994);const a=r(13802).Z.getLogger("esri/views/webgl"),o=!!(0,n.Z)("enable-feature:webgl-debug");function s(){return o}function c(){return o}function u(e){if(s()){const t=e.getError();if(t){const r=function(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}(e,t),n=(new Error).stack;a.error(new i.Z("webgl-error","WebGL error occured",{message:r,stack:n}))}}}},91907:(e,t,r)=>{r.d(t,{Ld:()=>i,Lu:()=>a,_g:()=>n});const i=33984;var n;!function(e){e[e.Texture=0]="Texture",e[e.Buffer=1]="Buffer",e[e.VAO=2]="VAO",e[e.Program=3]="Program",e[e.Framebuffer=4]="Framebuffer",e[e.Renderbuffer=5]="Renderbuffer",e[e.COUNT=6]="COUNT"}(n||(n={}));const a=33306}}]);